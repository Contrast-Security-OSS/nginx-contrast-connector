ngx_addon_name=ngx_http_contrast_connector_module
CFLAGS="$CFLAGS -std=gnu99"
if test -n "$ngx_module_link"; then
    ngx_module_type=HTTP_AUX_FILTER
    ngx_module_name=$ngx_addon_name
    ngx_module_incs="$ngx_addon_dir/build/protobuf-c/include"
    ngx_module_libs="$ngx_addon_dir/build/protobuf-c/lib/libprotobuf-c.a"
    ngx_module_srcs="$ngx_addon_dir/connect.pb-c.c \
        $ngx_addon_dir/ngx_http_contrast_connector_socket.c \
        $ngx_addon_dir/ngx_http_contrast_connector_handlers.c \
        $ngx_addon_dir/$ngx_addon_name.c"
    ngx_module_deps="$ngx_addon_dir/module_version.h \
        $ngx_addon_dir/ngx_http_contrast_connector_common.h \
        $ngx_addon_dir/ngx_http_contrast_connector_socket.h"
    . auto/module
else
    CORE_LIBS="$CORE_LIBS -lprotobuf-c"
    HTTP_AUX_FILTER_MODULES="$ngx_addon_name $HTTP_AUX_FILTER_MODULES"
    NGX_ADDON_SRCS="$NGX_ADDON_SRCS \
        $ngx_addon_dir/connect.pb-c.c \
        $ngx_addon_dir/ngx_http_contrast_connector_socket.c \
        $ngx_addon_dir/ngx_http_contrast_connector_handlers.c \
        $ngx_addon_dir/$ngx_addon_name.c"
    . auto/module
fi

